<%inherit file="app_base.htm" />
<%! from store import models as cmod %>

<%block name="page_header_title">
Cart
</%block>

<%block name="site_content">
<div id="content" style="padding:30px 0px;">
    <table class="carttab" width=100%; style="text-align:center;">
        <tr>
            <th>
                &nbsp;
            </th>
            <th>
                Product Name
            </th>
            <th>
                Quantity
            </th>
            <th>
                Price
            </th>
            <th>
                Extended
            </th>
            <th>Actions</th>
        </tr>
        %for item in saleItems :
        <tr>
            <td>
                <img src="${item.product.image_url()}" class="cartimg">
            </td>
            <td>
                <a href="/store/product/${item.product.id}"><p class="link">${item.product.name}</p></a>
            </td>
            <td>
                ${item.quantity}
            </td>
            <td>
              $${round(item.price,2)}
            </td>
            <td>
                    $${item.price * item.quantity}
            </td>
            <td>
                <a class="rmv" href="/store/cart.remove/${item.product.id}/">Remove</a>
            </td>
        </tr>
        %endfor
        <tr >
            <td>
                &nbsp;
            </td>
            <td>
                Tax
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                $${tax}
            </td>
            <td>
                 &nbsp;
            </td>

        </tr>
        <tr>
                <td>
                    &nbsp;
                </td>
                <td>
                    Total
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                   $${total}
                </td>
                <td>
                     &nbsp;
                </td>
    
            </tr>
    </table>
<hr>
    <p class="formlabel" style="font-size:20px;padding-left:20px; display:inline-block;">Shipping Option:
        <select class="shipSelect forminput" style="font-size:20px;padding:5px 10px;">
            <option value="">  </option>
            <option value="IP">In Person - FREE </option>
            <option value="MAIL">UPS Shipping</option>
        </select>
    
    <span class="personselectspan hide" name="personSelect" style="margin-left:20px;" > Referring Member:
            <select class="personselect forminput" style="font-size:20px;padding:5px 10px;">
                <option value="">  </option>
                <option value="LN">Loryn Norton</option>
                <option value="CN">Cara Nickels</option>
                <option value="BE">Bri Ellis</option>
                <option value="LS">Laurel Scott</option>
                <option value="ZB">Zachary Boyce</option>
                <option value="IM">Isaac McDougal</option>
                <option value="JJ">Johnnie Johnson</option>
                <option value="SH">Samuel Hepworth</option>
            </select>
    </span>
    
</p>
<div style="align-content:center; padding-bottom:10px; display:inline-block;">
        <a id="shippingbtn" class="mybtn buybtn hide" style="margin-left:20px;" href="/store/checkout/${cart.id}">Enter Shipping Information</a>
<a id="checkoutbtn" class="mybtn buybtn hide" style="margin-left:20px;" href="/store/checkout/${cart.id}">Checkout now</a>
</div>
</div>
</%block>

<%block name="left_content">
<script type="text/javascript">
    $(document).ready(function(){
        $("select.shipSelect").change(function(){
            var selected = $(this).children("option:selected").val();
            if (selected == "IP"){
                $(".personselectspan").addClass("show")
                $(".personselectspan").removeClass("hide")
                $("#shippingbtn").addClass("hide")
                $("#shippingbtn").removeClass("show")
            }
            if (selected == "MAIL"){
                $(".personselectspan").removeClass("show")
                $(".personselectspan").addClass("hide")
                $("#shippingbtn").addClass("show")
                $("#shippingbtn").removeClass("hide")
                $("#checkoutbtn").addClass("hide")
                $("#checkoutbtn").removeClass("show")

            }            
        });
        $("select.personselect").change(function(){
            var selected = $(this).children("option:selected").val();
            if (selected == ""){
                $("#checkoutbtn").addClass("hide")
                $("#checkoutbtn").removeClass("show")
            }
            else{
                $("#checkoutbtn").addClass("show")
                $("#checkoutbtn").removeClass("hide")
            }
        });
    });
    </script>
</%block>